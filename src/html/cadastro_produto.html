<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<title>Cadastro de Produto</title>
</head>
<body>
<h1>Cadastrar Produto</h1>

<form id="formProduto" enctype="multipart/form-data">
    <label>Nome:</label><br>
    <input type="text" name="nm_produto" required><br><br>

    <label>Descrição:</label><br>
    <textarea name="ds_produto"></textarea><br><br>

    <label>Preço (R$):</label><br>
    <input type="number" step="0.01" name="vl_produto" required><br><br>

    <label>Tipo:</label><br>
    <input type="text" name="ds_tipo"><br><br>

    <label>Foto (jpg/png/gif) - opcional:</label><br>
    <input type="file" name="ds_foto" accept="image/*"><br><br>

    <button type="submit">Cadastrar</button>
</form>

<div id="msg"></div>
<p><a href="listar_produtos.php">Ver meus produtos</a></p>

<script src="jquery-3.7.1.min.js"></script>
<script>
$('#formProduto').on('submit', function(e) {
    e.preventDefault();
    var fd = new FormData(this);

    $.ajax({
        url: 'salvar_produto.php',
        type: 'POST',
        data: fd,
        processData: false,
        contentType: false,
        success: function(res) {
            $('#msg').html(res);
            if (res.indexOf('sucesso') !== -1) {
                $('#formProduto')[0].reset();
            }
        },
        error: function() {
            alert('Erro na comunicação com o servidor.');
        }
    });
});
</script>
</body>
</html>
